<div class="parsing-rules">
    <div class="parsing-filter-card">
        <div class="filter-header">筛选</div>
        <div class="filter-rows" id="filterRows">
            <div class="filter-row">
                <div class="filter-field">
                    <span class="filter-label">规则名</span>
                    <input class="filter-input" type="text" placeholder="请输入规则名称" />
                </div>
                <div class="filter-field">
                    <span class="filter-label">状态</span>
                    <select class="filter-input">
                        <option value="">全部</option>
                        <option value="active">启用</option>
                        <option value="inactive">禁用</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="filter-actions">
            <div class="filter-spacer"></div>
            <button class="filter-btn outline" type="button" id="resetFilters">重置</button>
            <button class="filter-btn solid" type="button" id="applyFilters">查询</button>
        </div>
    </div>

    <div class="parsing-table-card">
        <div class="table-toolbar">
            <button class="toolbar-btn green" type="button" id="addRuleBtn">新增</button>
        </div>
        <div class="table-wrapper">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>规则名称</th>
                        <th>关联模型</th>
                        <th>版本</th>
                        <th>状态</th>
                        <th>最后修改时间</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
        <div class="pagination">
            <button class="page-btn" id="prevPage">&lt;</button>
            <div class="page-list" id="pageList"></div>
            <button class="page-btn" id="nextPage">&gt;</button>
        </div>
    </div>
</div>

<div class="modal-mask" id="modalMask" hidden>
    <div class="modal">
        <div class="modal-header">
            <span id="modalTitle">关联规则配置</span>
            <button class="modal-close" id="modalClose">×</button>
        </div>
        <div class="modal-body" id="modalBody">
            <form id="ruleForm" class="rule-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="ruleName">规则名称</label>
                        <input type="text" id="ruleName" name="ruleName" required placeholder="请输入规则名称">
                    </div>
                    <div class="form-group">
                        <label for="ruleDesc">规则描述</label>
                        <input type="text" id="ruleDesc" name="ruleDesc" placeholder="请输入规则描述">
                    </div>
                </div>
                
                <div class="form-section">
                    <div class="section-title">数据映射配置</div>
                    <div class="mapping-config">
                        <div class="mapping-header">
                            <div class="mapping-source">
                                <label>数据源</label>
                                <select id="dataSource" class="data-source-select">
                                    <option value="">请选择数据源</option>
                                    <option value="car">车辆数据</option>
                                    <option value="environment">环境数据</option>
                                    <option value="device">设备数据</option>
                                </select>
                            </div>
                            <div class="mapping-target">
                                <label>目标模型</label>
                                <select id="targetModel" class="target-model-select">
                                    <option value="">请选择目标模型</option>
                                    <option value="speedModel">速度模型</option>
                                    <option value="tempModel">温度模型</option>
                                    <option value="pressureModel">压力模型</option>
                                </select>
                            </div>
                            <div class="mapping-version">
                                <label for="version">版本</label>
                                <select id="version" name="version" class="version-select">
                                    <option value="v1.0.0">v1.0.0</option>
                                    <option value="v1.1.0">v1.1.0</option>
                                    <option value="v2.0.0">v2.0.0</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mapping-section">
                            <div class="mapping-title">输入映射关系（数据源 → 模型）</div>
                            <div class="mappings-list" id="mappingsList">
                                <!-- 动态添加映射行 -->
                            </div>
                            <button type="button" class="add-mapping-btn" id="addMapping">+ 添加映射</button>
                        </div>
                        
                        <div class="mapping-section">
                            <div class="mapping-title">结果回写映射（模型 → 数据源）</div>
                            <div class="mappings-list" id="resultMappingsList">
                                <!-- 动态添加结果映射行 -->
                            </div>
                            <button type="button" class="add-mapping-btn" id="addResultMapping">+ 添加回写映射</button>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>状态</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="status" value="active" checked>
                                <span class="radio-custom"></span>
                                <span>启用</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="status" value="inactive">
                                <span class="radio-custom"></span>
                                <span>禁用</span>
                            </label>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-cancel" id="cancelBtn">取消</button>
            <button type="button" class="btn btn-confirm" id="saveBtn">确定</button>
        </div>
    </div>
</div>
